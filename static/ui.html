<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>8BIT Upbit Bot UI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Tab Menu CSS (inlined) -->
  <style>
        /* Custom CSS */
        body {
            background: #0b1220;
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .card {
            background: #1e2329;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .container-fluid {
            padding: 20px;
        }
        /* íƒ­ ì‹œìŠ¤í…œ ìŠ¤íƒ€ì¼ */
        .tabs {
            list-style: none;
            padding: 0;
            margin: 0;
      display: flex;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            background: #1e2329;
        }
        
        .tabs li {
            margin: 0;
        }
        
        .tabs a {
            display: block;
            padding: 12px 20px;
      color: #888888;
            text-decoration: none;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
      font-weight: 600;
      font-size: 14px;
        }
        
        .tabs a:hover {
      color: #ffffff;
            background: rgba(255,255,255,0.05);
        }
        
        .tabs a.active {
            color: #00d1ff;
            border-bottom-color: #00d1ff;
            background: rgba(0,209,255,0.1);
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            background: #0b1220;
        }
        
        .tab-content.active {
            display: block;
    }
  </style>
</head>
<body>
    <div class="container-fluid">
        <!-- íƒ­ ì‹œìŠ¤í…œ -->
        <ul class="tabs">
            <li><a href="#tab1">ğŸƒ Guild Members Card System</a></li>
            <li><a href="#tab2" class="active">ğŸ“Š Trading Dashboard</a></li>
            <li><a href="#tab3">ğŸª™ Bitcoin Inventory</a></li>
        </ul>
        
        <!-- íƒ­ 1: Guild Members Card System -->
        <div id="tab1" class="tab-content">
            <div id="guild-members-system-content">
                <div class="text-center">
                    <p>Loading Guild Members Card System...</p>
                </div>
            </div>
        </div>

        <!-- íƒ­ 2: Trading Dashboard -->
        <div id="tab2" class="tab-content active">
            <div id="trading-dashboard-content">
                <div class="text-center">
                    <p>Loading Trading Dashboard...</p>
                </div>
              </div>
            </div>

        <!-- íƒ­ 3: Bitcoin Inventory -->
        <div id="tab3" class="tab-content">
            <div id="bitcoin-inventory-content">
                <div class="text-center">
                    <p>Loading Bitcoin Inventory...</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Tab Menu JS (inlined) -->
    <script>
        // íƒ­ ì „í™˜ ê¸°ëŠ¥
        $(document).ready(function() {
            $('.tabs a').click(function(e) {
                e.preventDefault();
                
                // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
                $('.tabs a').removeClass('active');
                $('.tab-content').removeClass('active');
                
                // í´ë¦­ëœ íƒ­ í™œì„±í™”
                $(this).addClass('active');
                const targetId = $(this).attr('href').substring(1);
                $('#' + targetId).addClass('active');
                
                // íƒ­ 2 (Trading Dashboard)ê°€ í™œì„±í™”ë˜ë©´ íŒŒì¼ ë¡œë“œ
                if (targetId === 'tab2') {
                    loadTradingDashboard();
                }
                
                // íƒ­ 1 (Guild Members Card System)ì´ í™œì„±í™”ë˜ë©´ ê²Œì„ ì‹œìŠ¤í…œ ë¡œë“œ
                if (targetId === 'tab1') {
                    loadGameSystem();
                }
                
                // íƒ­ 3 (Bitcoin Inventory)ê°€ í™œì„±í™”ë˜ë©´ ì¸ë²¤í† ë¦¬ ë¡œë“œ
                if (targetId === 'tab3') {
                    loadBitcoinInventory();
                }
                
                // íƒ­ ì „í™˜ ì‹œ N/B Zone Status ì‹œê°„í”„ë ˆì„ ë™ê¸°í™”
                // console.log('ğŸ”„ Tab switched to:', targetId);
                
                // ì¦‰ì‹œ ë™ê¸°í™” ì‹œë„
                if (typeof updateNBZoneTimeframe === 'function') {
                    updateNBZoneTimeframe();
                }
                
                // N/B Zone Status ë°ì´í„° ê°±ì‹ 
                if (typeof window.refreshNbZoneStrip === 'function') {
                    window.refreshNbZoneStrip();
                } else if (typeof refreshNbZoneStrip === 'function') {
                    refreshNbZoneStrip();
                } else {
                    // í•¨ìˆ˜ê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì€ ê²½ìš°, ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„
                    setTimeout(function() {
                        if (typeof window.refreshNbZoneStrip === 'function') {
                            window.refreshNbZoneStrip();
                        }
                    }, 1000);
                }
                
                // ì§€ì—° ë™ê¸°í™” ì‹œë„ë“¤
                setTimeout(function() {
                    if (typeof updateNBZoneTimeframe === 'function') {
                        updateNBZoneTimeframe();
                    }
                    if (typeof window.refreshNbZoneStrip === 'function') {
                        window.refreshNbZoneStrip();
                    } else if (typeof refreshNbZoneStrip === 'function') {
                        refreshNbZoneStrip();
                    }
                }, 100);
                
                setTimeout(function() {
                    if (typeof updateNBZoneTimeframe === 'function') {
                        updateNBZoneTimeframe();
                    }
                    if (typeof window.refreshNbZoneStrip === 'function') {
                        window.refreshNbZoneStrip();
                    } else if (typeof refreshNbZoneStrip === 'function') {
                        refreshNbZoneStrip();
                    }
                }, 500);
                
                setTimeout(function() {
                    if (typeof updateNBZoneTimeframe === 'function') {
                        updateNBZoneTimeframe();
                    }
                    if (typeof window.refreshNbZoneStrip === 'function') {
                        window.refreshNbZoneStrip();
                    } else if (typeof refreshNbZoneStrip === 'function') {
                        refreshNbZoneStrip();
                    }
                }, 1000);
                
                // ê°•ì œ ë™ê¸°í™” - 2ì´ˆ í›„ ìµœì¢… ì‹œë„
                setTimeout(function() {
                    if (typeof forceUpdateNBZoneTimeframe === 'function') {
                        forceUpdateNBZoneTimeframe();
                    }
                    if (typeof window.refreshNbZoneStrip === 'function') {
                        window.refreshNbZoneStrip();
                    } else if (typeof refreshNbZoneStrip === 'function') {
                        refreshNbZoneStrip();
                    }
                }, 2000);
            });
            
            // Trading Dashboard íŒŒì¼ ë¡œë“œ í•¨ìˆ˜
            function loadTradingDashboard() {
                // ì´ë¯¸ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
                if (window.tradingDashboardLoaded) return;
                
                $('#trading-dashboard-content').html('<div class="text-center"><p>Loading Trading Dashboard...</p></div>');
                
                // trading-dashboard.html íŒŒì¼ ë¡œë“œ
                $.get('/static/trading-dashboard.html', function(data) {
                    $('#trading-dashboard-content').html(data);
                    
                    // í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ë“¤ ë™ì  ë¡œë“œ
                    const scripts = [
                        'https://unpkg.com/lightweight-charts@4.2.0/dist/lightweight-charts.standalone.production.js',
                        'https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js',
                        'https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js',
                        'https://unpkg.com/masonry-layout@4.2.2/dist/masonry.pkgd.min.js',
                        '/static/mayor-guidance.js?v=dev',
                        '/static/village-trading-process.js?v=dev',
                        '/static/trainer-system.js?v=dev',
                        '/static/village-learning-system.js?v=dev',
                        '/static/guild-members-status.js?v=dev',
                        '/static/ui.js?v=dev'
                    ];
                    
                    let loadedScripts = 0;
                    const totalScripts = scripts.length;
                    
                    // LightweightChartsë¥¼ ë¨¼ì € ë¡œë“œí•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œ
                    function loadScriptSequentially(scriptList, index = 0) {
                        if (index >= scriptList.length) {
                            // ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ
                                                                setTimeout(function() {
                                        if (typeof initChart === 'function') {
                                            initChart();
                                        }
                                        console.log('ğŸ“Š Trading Dashboard initialized successfully');
                                        
                                        // Set initial timeframe in global variable
                                        setTimeout(function() {
                                            const tfEl = document.getElementById('timeframe');
                                            if (tfEl && window.currentGlobalInterval) {
                                                window.currentGlobalInterval = tfEl.value;
                                                console.log('ğŸ• Initial timeframe set to:', window.currentGlobalInterval);
                                            }
                                                                                    // Update N/B Zone Status timeframe
                                        if (typeof updateNBZoneTimeframe === 'function') {
                                            updateNBZoneTimeframe();
                                        }
                                        
                                        // Update N/B Zone Status data
                                        if (typeof window.refreshNbZoneStrip === 'function') {
                                            window.refreshNbZoneStrip();
                                        } else if (typeof refreshNbZoneStrip === 'function') {
                                            refreshNbZoneStrip();
                                        }
                                        }, 500);
                                        
                                        // Auto-enable toggles after chart initialization
                                        setTimeout(function() {
                                            if (typeof window.enableAutoToggles === 'function') {
                                                window.enableAutoToggles();
                                            }
                                        }, 3000);
                                        
                                        // Final N/B Zone Status refresh after everything is loaded
                                        setTimeout(function() {
                                            if (typeof window.refreshNbZoneStrip === 'function') {
                                                window.refreshNbZoneStrip();
                                            } else if (typeof refreshNbZoneStrip === 'function') {
                                                refreshNbZoneStrip();
                                            }
                                        }, 4000);
                                        
                                        // ë¶„ë´‰ ìë™ ìˆœíšŒ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
                                        setTimeout(function() {
                                            if (typeof window.initTimeframeCycle === 'function') {
                                                window.initTimeframeCycle();
                                            }
                                        }, 5000);
                                    }, 1000); // ë” ê¸´ ëŒ€ê¸° ì‹œê°„
                            return;
                        }
                        
                        const src = scriptList[index];
                        if (!document.querySelector(`script[src="${src}"]`)) {
                            const script = document.createElement('script');
                            script.src = src;
                            script.onload = function() {
                                console.log(`âœ… Loaded: ${src}`);
                                // ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
                                setTimeout(() => loadScriptSequentially(scriptList, index + 1), 100);
                            };
                            script.onerror = function() {
                                console.error(`âŒ Failed to load: ${src}`);
                                // ì—ëŸ¬ê°€ ìˆì–´ë„ ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
                                setTimeout(() => loadScriptSequentially(scriptList, index + 1), 100);
                            };
                            document.head.appendChild(script);
                        } else {
                            console.log(`âœ… Already loaded: ${src}`);
                            // ì´ë¯¸ ë¡œë“œëœ ê²½ìš° ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ë¡œ
                            setTimeout(() => loadScriptSequentially(scriptList, index + 1), 100);
                        }
                    }
                    
                    // ìˆœì°¨ì ìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
                    loadScriptSequentially(scripts);
                    
                    window.tradingDashboardLoaded = true;
                }).fail(function() {
                    $('#trading-dashboard-content').html('<div class="text-center text-danger"><p>Failed to load Trading Dashboard</p></div>');
                });
            }
            
            // Guild Members Card System ë¡œë“œ í•¨ìˆ˜
            function loadGameSystem() {
                // ì´ë¯¸ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
                if (window.guildMembersSystemLoaded) return;
                
                $('#guild-members-system-content').html('<div class="text-center"><p>Loading Guild Members Card System...</p></div>');
                
                // guild-members-system.html íŒŒì¼ ë¡œë“œ
                $.get('/static/guild-members-system.html', function(data) {
                    $('#guild-members-system-content').html(data);
                    
                    // í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ë“¤ ë¡œë“œ (API ì—°ê²°ì„ ìœ„í•´ ui.js í¬í•¨)
                    const gameScripts = [
                        '/static/ui.js?v=dev',
                        '/static/guild-members-card-system.js'
                    ];
                    
                    let loadedScripts = 0;
                    const totalScripts = gameScripts.length;
                    
                    function loadGameScriptsSequentially(scriptList, index = 0) {
                        if (index >= scriptList.length) {
                            // ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ
                            window.gameSystemLoaded = true;
                            window.guildMembersSystemLoaded = true;
                            console.log('ğŸƒ Guild Members Card System loaded successfully');
                            
                            // ê²Œì„ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
                            if (window.initGameSystem) {
                                window.initGameSystem();
                            }
                            return;
                        }
                        
                        const src = scriptList[index];
                        if (!document.querySelector(`script[src="${src}"]`)) {
                            const script = document.createElement('script');
                            script.src = src;
                            script.onload = function() {
                                console.log(`âœ… Loaded: ${src}`);
                                // ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
                                setTimeout(() => loadGameScriptsSequentially(scriptList, index + 1), 100);
                            };
                            script.onerror = function() {
                                console.error(`âŒ Failed to load: ${src}`);
                                // ì—ëŸ¬ê°€ ìˆì–´ë„ ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
                                setTimeout(() => loadGameScriptsSequentially(scriptList, index + 1), 100);
                            };
                            document.head.appendChild(script);
                        } else {
                            console.log(`âœ… Already loaded: ${src}`);
                            // ì´ë¯¸ ë¡œë“œëœ ê²½ìš° ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ë¡œ
                            setTimeout(() => loadGameScriptsSequentially(scriptList, index + 1), 100);
                        }
                    }
                    
                    // ìˆœì°¨ì ìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
                    loadGameScriptsSequentially(gameScripts);
                    
                }).fail(function() {
                    $('#guild-members-system-content').html('<div class="text-center text-danger"><p>Failed to load Guild Members Card System</p></div>');
                });
            }
            
            // ì´ˆê¸° ë¡œë“œ ì‹œ í™œì„±í™”ëœ íƒ­ì— ë”°ë¼ ì‹œìŠ¤í…œ ë¡œë“œ
            if ($('#tab1').hasClass('active')) {
                loadGameSystem();
            } else if ($('#tab2').hasClass('active')) {
                loadTradingDashboard();
            } else if ($('#tab3').hasClass('active')) {
                loadBitcoinInventory();
            }
            
            // Bitcoin Inventory ë¡œë“œ í•¨ìˆ˜
            function loadBitcoinInventory() {
                if (window.bitcoinInventoryLoaded) return;
                
                $('#bitcoin-inventory-content').html(`
                    <div class="container-fluid py-3">
                        <div class="card border-secondary rounded-3 p-3 mb-3">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h3 class="m-0 text-white">ğŸª™ Bitcoin Inventory</h3>
                                <div>
                                    <button id="btnRefreshInventory" class="btn btn-sm btn-outline-light me-2">ìƒˆë¡œê³ ì¹¨</button>
                                    <button id="btnCreateTestItem" class="btn btn-sm btn-outline-info">í…ŒìŠ¤íŠ¸ ì•„ì´í…œ ìƒì„±</button>
                                </div>
                            </div>
                            
                            <!-- ìš”ì•½ ì •ë³´ -->
                            <div id="inventorySummary" class="card border-secondary rounded-3 p-3 mb-3">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="text-muted" style="font-size:12px">ì´ ë³´ìœ  ìˆ˜ëŸ‰</div>
                                        <div id="totalAmount" class="text-white" style="font-size:20px; font-weight:bold">0.00000000 BTC</div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="text-muted" style="font-size:12px">ì´ ê°€ì¹˜</div>
                                        <div id="totalValue" class="text-white" style="font-size:20px; font-weight:bold">0 KRW</div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="text-muted" style="font-size:12px">ì´ ì†ìµ</div>
                                        <div id="totalProfitLoss" class="text-white" style="font-size:20px; font-weight:bold">0 KRW</div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="text-muted" style="font-size:12px">í˜„ì¬ BTC ê°€ê²©</div>
                                        <div id="currentBtcPrice" class="text-white" style="font-size:20px; font-weight:bold">0 KRW</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ì•„ì´í…œ ëª©ë¡ -->
                            <div id="inventoryItems" class="row g-3">
                                <div class="col-12 text-center text-muted">
                                    <p>ì•„ì´í…œì´ ì—†ìŠµë‹ˆë‹¤.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `);
                
                // ì¸ë²¤í† ë¦¬ ë¡œë“œ ë° ì—…ë°ì´íŠ¸
                function loadInventory() {
                    $.get('/api/items/list?status=active', function(response) {
                        if (response.ok) {
                            updateInventoryUI(response);
                        }
                    }).fail(function() {
                        console.error('Failed to load inventory');
                    });
                }
                
                function updateInventoryUI(data) {
                    // ìš”ì•½ ì •ë³´ ì—…ë°ì´íŠ¸
                    $('#totalAmount').text(data.total.total_amount.toFixed(8) + ' BTC');
                    $('#totalValue').text(data.total.total_value.toLocaleString() + ' KRW');
                    
                    const profitLossClass = data.total.total_profit_loss >= 0 ? 'text-success' : 'text-danger';
                    const profitLossSign = data.total.total_profit_loss >= 0 ? '+' : '';
                    $('#totalProfitLoss').html(`<span class="${profitLossClass}">${profitLossSign}${data.total.total_profit_loss.toLocaleString()} KRW (${profitLossSign}${data.total.total_profit_loss_percent.toFixed(2)}%)</span>`);
                    
                    $('#currentBtcPrice').text(data.current_btc_price.toLocaleString() + ' KRW');
                    
                    // ì•„ì´í…œ ëª©ë¡ ì—…ë°ì´íŠ¸
                    const itemsContainer = $('#inventoryItems');
                    itemsContainer.empty();
                    
                    if (data.items.length === 0) {
                        itemsContainer.html('<div class="col-12 text-center text-muted"><p>ì•„ì´í…œì´ ì—†ìŠµë‹ˆë‹¤.</p></div>');
                        return;
                    }
                    
                    data.items.forEach(function(item) {
                        const profitLossClass = item.profit_loss >= 0 ? 'text-success' : 'text-danger';
                        const profitLossSign = item.profit_loss >= 0 ? '+' : '';
                        const borderClass = item.profit_loss >= 0 ? 'border-success' : 'border-danger';
                        
                        const itemCard = `
                            <div class="col-md-4">
                                <div class="card border-secondary rounded-3 p-3 ${borderClass}" style="border-width:2px !important;">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h5 class="m-0 text-white">ğŸª™ ${item.item_name || 'ë¹„íŠ¸ì½”ì¸'}</h5>
                                        <span class="badge bg-primary">${item.item_id.split('_').pop()}</span>
                                    </div>
                                    <div class="mb-2">
                                        <div class="text-muted" style="font-size:11px">ìˆ˜ëŸ‰</div>
                                        <div class="text-white" style="font-size:14px; font-weight:bold">${item.purchase_amount.toFixed(8)} BTC</div>
                                    </div>
                                    <div class="mb-2">
                                        <div class="text-muted" style="font-size:11px">êµ¬ë§¤ê°€</div>
                                        <div class="text-white" style="font-size:12px">${item.purchase_price.toLocaleString()} KRW</div>
                                    </div>
                                    <div class="mb-2">
                                        <div class="text-muted" style="font-size:11px">í˜„ì¬ê°€</div>
                                        <div class="text-white" style="font-size:12px">${item.current_price.toLocaleString()} KRW</div>
                                    </div>
                                    <div class="mb-2">
                                        <div class="text-muted" style="font-size:11px">í˜„ì¬ ê°€ì¹˜</div>
                                        <div class="text-white" style="font-size:14px; font-weight:bold">${item.current_value.toLocaleString()} KRW</div>
                                    </div>
                                    <div class="mb-2">
                                        <div class="text-muted" style="font-size:11px">ì†ìµ</div>
                                        <div class="${profitLossClass}" style="font-size:14px; font-weight:bold">
                                            ${profitLossSign}${item.profit_loss.toLocaleString()} KRW (${profitLossSign}${item.profit_loss_percent.toFixed(2)}%)
                                        </div>
                                    </div>
                                    <div class="mb-2">
                                        <div class="text-muted" style="font-size:10px">êµ¬ë§¤ì¼: ${new Date(item.purchase_time).toLocaleString('ko-KR')}</div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-sm btn-danger w-100 btn-sell-item" data-item-id="${item.item_id}">íŒë§¤</button>
                                    </div>
                                </div>
                            </div>
                        `;
                        itemsContainer.append(itemCard);
                    });
                    
                    // íŒë§¤ ë²„íŠ¼ ì´ë²¤íŠ¸
                    $('.btn-sell-item').click(function() {
                        const itemId = $(this).data('item-id');
                        if (confirm('ì •ë§ ì´ ì•„ì´í…œì„ íŒë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                            $.ajax({
                                url: '/api/items/sell',
                                method: 'POST',
                                contentType: 'application/json',
                                data: JSON.stringify({item_id: itemId}),
                                success: function(response) {
                                    if (response.ok) {
                                        alert('íŒë§¤ ì™„ë£Œ!');
                                        loadInventory();
                                    } else {
                                        alert('íŒë§¤ ì‹¤íŒ¨: ' + response.error);
                                    }
                                },
                                error: function() {
                                    alert('íŒë§¤ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                                }
                            });
                        }
                    });
                }
                
                // ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼
                $('#btnRefreshInventory').click(function() {
                    loadInventory();
                });
                
                // í…ŒìŠ¤íŠ¸ ì•„ì´í…œ ìƒì„± ë²„íŠ¼
                $('#btnCreateTestItem').click(function() {
                    const testPrice = 95000000; // í…ŒìŠ¤íŠ¸ êµ¬ë§¤ê°€
                    const testAmount = 0.001; // í…ŒìŠ¤íŠ¸ ìˆ˜ëŸ‰
                    
                    $.ajax({
                        url: '/api/items/create',
                        method: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify({
                            purchase_price: testPrice,
                            purchase_amount: testAmount,
                            item_name: 'í…ŒìŠ¤íŠ¸ ë¹„íŠ¸ì½”ì¸'
                        }),
                        success: function(response) {
                            if (response.ok) {
                                alert('í…ŒìŠ¤íŠ¸ ì•„ì´í…œì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
                                loadInventory();
                            } else {
                                alert('ì•„ì´í…œ ìƒì„± ì‹¤íŒ¨: ' + response.error);
                            }
                        },
                        error: function() {
                            alert('ì•„ì´í…œ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                        }
                    });
                });
                
                // ì´ˆê¸° ë¡œë“œ
                loadInventory();
                
                // 5ì´ˆë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸
                setInterval(function() {
                    if ($('#tab3').hasClass('active')) {
                        loadInventory();
                    }
                }, 5000);
                
                window.bitcoinInventoryLoaded = true;
            }
        });
    </script>
</body>
</html>


